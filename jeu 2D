import pygame
import sys
  #⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️ Pour le bon déroulé du jeu, télécharger deux images, "maitreyii.png" et "gp.png", et les positionner sur le bureau,
    #Lors du choix de l'image, il faut bien s'assurer d'aller sur le lien de l'image avant de la télécharger afin de s'assurer que l'image soit en .png ⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️

pygame.init()

# Dimensions de la fenêtre
width, height = 800, 600

background_color = (173, 216, 230)

# Création de la fenêtre
screen = pygame.display.set_mode((width, height))
pygame.display.set_caption("La faille des légendes")

# Chargement de l'image du bonhomme et redimensionnement
original_bonhomme_image = pygame.image.load("maitreyii.png")
original_bonhomme_image2 = pygame.image.load("gp.png")
original_bonhomme_rect = original_bonhomme_image.get_rect()
original_bonhomme_rect2 = original_bonhomme_image2.get_rect()
bonhomme_scale_factor = 0.2  # Ajustez le facteur d'échelle selon vos besoins

# Bonhomme à gauche (interactif)
bonhomme1_image = pygame.transform.scale(original_bonhomme_image,
                                         (int(original_bonhomme_rect.width * bonhomme_scale_factor),
                                          int(original_bonhomme_rect.height * bonhomme_scale_factor)))
bonhomme1_rect = bonhomme1_image.get_rect()
bonhomme1_x, bonhomme1_y = width // 4 - bonhomme1_rect.width // 2, height // 2 - bonhomme1_rect.height // 2
bonhomme1_speed = 5

# Bonhomme à droite (non interactif)
bonhomme2_image = pygame.transform.scale(original_bonhomme_image2,
                                         (int(original_bonhomme_rect2.width * bonhomme_scale_factor),
                                          int(original_bonhomme_rect2.height * bonhomme_scale_factor)))
bonhomme2_rect = bonhomme2_image.get_rect()
bonhomme2_x, bonhomme2_y = width * 3 // 4 - bonhomme2_rect.width // 2, height // 2 - bonhomme2_rect.height // 2

# Distance minimale entre les bonhommes pour l'interaction
interaction_distance = 20

dialogue = "Appuyez sur 'E' pour parler à GP"

# Font pour le texte
font = pygame.font.Font(None, 36)

text_color = (255, 255, 255)

# Boucle principale
while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()

        # Gestion de l'événement clavier pour la touche 'E'
        if pygame.key.get_pressed()[pygame.K_e]:
            if abs(bonhomme1_x - bonhomme2_x) < 200:
                dialogue = "Résout l'énigme suivante: 2 + 2 = ??"

    # Gestion des touches pressées (bonhomme1 à gauche)
    keys = pygame.key.get_pressed()

    # Mise à jour de la position du bonhomme1
    if bonhomme1_x < bonhomme2_x - interaction_distance or bonhomme1_x > bonhomme2_x + bonhomme2_rect.width + interaction_distance:
        bonhomme1_x += (keys[pygame.K_RIGHT] - keys[pygame.K_LEFT]) * bonhomme1_speed

    # Si bonhomme1 atteint le bord droit, réinitialiser à gauche
    if bonhomme1_x > width // 2 - bonhomme1_rect.width // 2:
        bonhomme1_x = 0 - bonhomme1_rect.width

    # Remplissage de l'écran avec la couleur de fond
    screen.fill(background_color)

    # Affichage du bonhomme1 à sa nouvelle position
    screen.blit(bonhomme1_image, (bonhomme1_x, bonhomme1_y))

    # Affichage du bonhomme2 (non interactif) à sa position fixe
    screen.blit(bonhomme2_image, (bonhomme2_x, bonhomme2_y))

    # Affichage du dialogue
    text_surface = font.render(dialogue, True, text_color)
    screen.blit(text_surface, (width // 2 - text_surface.get_width() // 2, height - 50))

    # Rafraîchissement de l'écran
    pygame.display.flip()

    # Limite de vitesse de la boucle
    pygame.time.Clock().tick(30)
    #⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️ Pour le bon déroulé du jeu, télécharger deux images, "maitreyii.png" et "gp.png", et les positionner sur le bureau,
    #Lors du choix de l'image, il faut bien s'assurer d'aller sur le lien de l'image avant de la télécharger afin de s'assurer que l'image soit en .png ⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️⚠️

    #Pour plus tard, écran d'acceuil avec jouer/quitter ; Travailler l'interaction ; ajouter des réponses aux énigmes ; Ajouter un système de points ; ajouter un systeme qui ferme ton jeu si tu te rompes plus de 3 fois.
